# Batch Connect app configuration file
---
name: CryoSPARC
cluster: "odyssey3"
attributes:
  modules: null
  config_file:
    label: "Path to CryoSPARC config file (config.sh)."
    widget: text_field
  binary_directory:
    label: "Where'd you install the cryosparcm binary?"
    widget: text_field
  custom_time:
    label: "Allocated Time (expressed in MM , or HH:MM:SS , or DD-HH:MM)."
    value: "<%= defined?(@custom_time) ? @custom_time : '04:00:00' %>"
    widget: text_field
  bc_queue:
    label: "SLURM partition"
    value: test
    widget: text_field
  custom_email_address:
    label: "email address for status notification"
    widget: text_field
  custom_memory_per_node:
    label: "Memory Allocation in GB"
    value: <%= defined?(@custom_memory_per_node) ? @custom_memory_per_node : 32 %>
    min: <%= defined?(@custom_memory_per_node_min) ? @custom_memory_per_node_min : 1 %>
    step: 1
    max: <%= defined?(@custom_memory_per_node_max) ? @custom_memory_per_node_max : 32 %>
    widget: number_field
  custom_num_cores:
    label: "Number of cores"
    value: <%= defined?(@custom_num_cores) ? @custom_num_cores : 4 %>
    min: <%= defined?(@custom_num_cores_min) ? @custom_num_cores_min : 1 %>
    step: 1
    max: <%= defined?(@custom_num_cores_max) ? @custom_num_cores_max : 16 %>
    widget: number_field
    help: "Number of Cpus to allocate"
  custom_num_gpus: <%= defined?(@custom_num_gpus) ? @custom_num_gpus : 0 %> 
  custom_reservation: null
  envscript: null
  bc_account:
    label: "Slurm Account"
    help: "If you are not in multiple labs please leave this blank."

form:
  - config_file
  - modules
  - bc_queue
  - custom_memory_per_node
  - custom_num_cores
  - custom_num_gpus
  - custom_time
  - envscript
  - custom_reservation
